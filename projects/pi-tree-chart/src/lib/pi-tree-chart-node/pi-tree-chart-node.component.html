<table class="pi-tree-chart-node-table">
  <tr>
    <td [colSpan]="datasource.children && datasource.children.length ? datasource.children.length * 2 : null">
      <div class="node" #node>
        <ng-container *ngTemplateOutlet="nodeTemplateOutlet; context: {'context': datasource, 'node': this}"></ng-container>
      </div>
    </td>
  </tr>
  <ng-container *ngIf="createNextLevel">
    <tr>
      <td [style.paddingTop]="verticalSpace + 'px'" colspan="2" *ngFor="let child of datasource.children">
        <pi-tree-chart-node #childNode 
            [datasource]="child" 
            [nodeTemplateOutlet]="nodeTemplateOutlet" 
            [parentNode]="this"
            [lineOptions]="lineOptions"
            [verticalSpace]="verticalSpace"
            [level]="level + 1"
            [levelLimit]="levelLimit"
          ></pi-tree-chart-node>
        <pi-leader-line #line [options]="lineOptions"></pi-leader-line>
      </td>
    </tr>
  </ng-container>
</table>